import{_ as M,x as j,y as A,m as F,u as $,a as i,H as E,o as H,b as S,c as l,d as c,e as t,f as e,Q as p,t as u,g as Q,F as C,h as P,j as y,w as T,a4 as z,a5 as G,i as J,p as K,k as O}from"./index-f21bb9dc.js";import{P as w}from"./PlayListItem-daabc9b1.js";const N=f=>(K("data-v-bd63fac0"),f=f(),O(),f),W={class:"userDetail_container"},X={class:"top flex"},Y={class:"cover"},Z=["src"],ee={class:"content"},te={class:"name"},se={key:0,class:"flex"},ae={class:"mr20"},oe={key:1,class:"flex align-center"},le=N(()=>t("h2",{class:"base_title"},"创建的歌单",-1)),ne={class:"grid grid-column-10"},ie=N(()=>t("h2",{class:"base_title"},"收藏的歌单",-1)),re={class:"grid grid-column-10"},ce={class:"bottom flex align-center justify-center"},ue={__name:"userDetail",setup(f){const D=j(A),r=F(),R=$(),s=i({profile:{avatarUrl:"",nickname:"",signature:""}}),k=i(10),m=i(0),B=i({id:r.query.id,picUrl:new URL(""+new URL("chart-simple-c026e59e.png",import.meta.url).href,self.location).href,name:"听歌排行",to:"/songRank"}),v=i([]),d=i([]),b=i(!1),_=i(!1),L=i(!1);function I(){z({uid:r.query.id}).then(a=>{console.log("信息",a),s.value=a})}function x(){G({uid:r.query.id,limit:k.value,offset:m.value}).then(a=>{console.log(a),b.value=a.playlist.length>=k.value;let n=a.playlist,h=[],g=[];for(let o=0;o<n.length;o++)n[o].userId===D.accountId?h.push(n[o]):g.push(n[o]);v.value=[...v.value,...h],d.value=[...d.value,...g],_.value=!1,L.value=!1})}function q(a){R.push({path:"/user",query:{num:a,uid:r.query.id}})}function V(){L.value=!0,m.value+=k.value,x()}return E(()=>r.query.id,a=>{a&&r.name==="userDetail"&&(v.value=[],d.value=[],b.value=!1,I(),_.value=!0,m.value=0,x())}),H(async()=>{await I(),_.value=!0,m.value=0,x()}),(a,n)=>{const h=S("a-empty"),g=S("a-button");return l(),c("div",W,[t("section",X,[t("section",Y,[e(s).profile.avatarUrl?(l(),c("img",{key:0,src:e(s).profile.avatarUrl,alt:""},null,8,Z)):p("",!0)]),t("section",ee,[t("p",te,u(e(s).profile.nickname),1),e(s).level?(l(),c("div",se,[t("p",ae,"Lv."+u(e(s).level),1),t("p",null,"账号已存在"+u(e(s).createDays)+"天",1)])):p("",!0),e(s).profile.follows?(l(),c("div",oe,[t("u",{class:"pointer mr20",onClick:n[0]||(n[0]=o=>q(1))},"关注："+u(e(s).profile.follows),1),t("u",{class:"pointer",onClick:n[1]||(n[1]=o=>q(2))},"粉丝："+u(e(s).profile.followeds),1)])):p("",!0),t("p",null,u(e(s).profile.signature),1)])]),le,t("section",ne,[Q(w,{"item-data":e(B),hide:!0},null,8,["item-data"]),(l(!0),c(C,null,P(e(v),(o,U)=>(l(),y(w,{"item-data":o,loading:e(_),key:U},null,8,["item-data","loading"]))),128))]),ie,e(d).length===0?(l(),y(h,{key:0,description:"暂无数据"})):p("",!0),t("section",re,[(l(!0),c(C,null,P(e(d),(o,U)=>(l(),y(w,{"item-data":o,loading:e(_),key:U},null,8,["item-data","loading"]))),128))]),t("div",ce,[e(b)&&Number(e(r).query.id)!==e(D).accountId?(l(),y(g,{key:0,loading:e(L),onClick:V},{default:T(()=>[J("加载更多")]),_:1},8,["loading"])):p("",!0)])])}}},pe=M(ue,[["__scopeId","data-v-bd63fac0"]]);export{pe as default};
